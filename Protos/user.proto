syntax = "proto3";

package user;

import "Protos/role.proto";

option csharp_namespace = "PingChatApp.Common.Protos";
option go_package = "github.com/PingChatApp/Common/out/pb";

service UserDataService 
{
  rpc GetUserById(GetUserByIdRequest) returns (UserResponse);
  rpc GetUserByRefId(GetUserByRefIdRequest) returns (UserResponse);
  rpc GetUserByUsername(GetUserByUsernameRequest) returns (UserResponse);

  rpc GetUserRoles(GetUserRolesRequest) returns (UserRolesResponse);

  rpc CreateUser(CreateUserRequest) returns (UserResponse);
  rpc UpdateUser(UpdateUserRequest) returns (UserResponse);
  rpc DeleteUser(DeleteUserRequest) returns (UserResponse);
}

message GetUserByIdRequest { string id = 1; }
message GetUserByUsernameRequest { string username = 1; }
message GetUserByRefIdRequest { string reference_id = 1; }
message GetUserRolesRequest { int32 user_id = 1; }
message CreateUserRequest 
{
  string username = 1;
  string email = 2;
  string password_hash = 3;
  string name = 4;
  repeated string roles = 5;
}

message UpdateUserRequest
{
  string reference_id = 1;
  string username = 2;
  string email = 3;
  string password_hash = 4;
  string name = 5;
  repeated string roles = 6;
}

message DeleteUserRequest { string reference_id = 1; }

message UserResponse {
  int32 id = 1;
  string username = 2;
  string display_name = 3;
  bool is_active = 4;
  repeated role.RoleResponse roles = 5;
  string email = 6;
}

message UserRolesResponse 
{ 
  repeated role.RoleResponse roles = 1;
}